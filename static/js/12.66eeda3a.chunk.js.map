{"version":3,"sources":["../../../node_modules/fast-deep-equal/index.js","../../../node_modules/topojson-client/src/identity.js","../../../node_modules/topojson-client/src/transform.js","../../../node_modules/topojson-client/src/feature.js","../../../node_modules/topojson-client/src/reverse.js","../../../node_modules/topojson-client/src/bisect.js","../../../node_modules/topojson-server/src/hash/point-hash.js","../../../node_modules/topojson-simplify/src/spherical.js","../../../node_modules/swr/esm/libs/is-document-visible.js","../../../node_modules/swr/esm/libs/is-online.js","../../../node_modules/swr/esm/libs/hash.js","../../../node_modules/swr/esm/cache.js","../../../node_modules/swr/esm/config.js","../../../node_modules/swr/esm/libs/throttle.js","../../../node_modules/swr/esm/swr-config-context.js","../../../node_modules/swr/esm/use-swr.js","../../../node_modules/swr/esm/use-swr-pages.js","../../../node_modules/swr/esm/index.js"],"names":["isArray","Array","keyList","Object","keys","hasProp","prototype","hasOwnProperty","module","exports","equal","a","b","i","length","key","arrA","arrB","dateA","Date","dateB","getTime","regexpA","RegExp","regexpB","toString","call","x","transform","identity","x0","y0","kx","scale","ky","dx","translate","dy","input","j","n","output","topology","o","type","features","geometries","map","feature","id","bbox","properties","geometry","object","transformPoint","arcs","arc","points","pop","k","push","array","t","reverse","point","p","line","ring","polygon","coordinates","buffer","ArrayBuffer","Float64Array","Uint32Array","Math","PI","abs","atan2","cos","sin","isDocumentVisible","document","visibilityState","isOnline","navigator","onLine","table","WeakMap","counter","cache","Cache","initialData","this","__cache","Map","entries","__listeners","get","_key","serializeKey","set","value","shouldNotify","mutate","notify","from","has","clear","forEach","delete","args","err","_hash","String","hash","subscribe","listener","_this","Error","isSubscribed","index","indexOf","_i","_a","CONCURRENT_PROMISES","CONCURRENT_PROMISES_TS","FOCUS_REVALIDATORS","CACHE_REVALIDATORS","MUTATION_TS","slowConnection","window","effectiveType","defaultConfig","onLoadingSlow","onSuccess","onError","onErrorRetry","_","__","config","revalidate","opts","errorRetryCount","retryCount","count","min","timeout","random","errorRetryInterval","setTimeout","focusThrottleInterval","dedupingInterval","loadingTimeout","refreshInterval","revalidateOnFocus","revalidateOnReconnect","refreshWhenHidden","refreshWhenOffline","shouldRetryOnError","suspense","compare","deepEqual","eventsBinded","addEventListener","throttle","fn","interval","pending","arguments","apply","SWRConfigContext","createContext","displayName","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","f","y","g","label","sent","trys","ops","verb","Symbol","iterator","v","op","TypeError","IS_SERVER","useIsomorphicLayoutEffect","useEffect","useLayoutEffect","trigger","shouldRevalidate","keyErr","updaters","currentData","currentError","promises","all","broadcastState","data","error","_data","beforeMutationTs","beforeConcurrentPromisesTs","err_1","err_2","now","Provider","useSWR","fnArgs","assign","useContext","fetcher","initialError","stateDependencies","useRef","isValidating","stateRef","rerender","useState","dispatch","useCallback","payload","shouldUpdateState","current","unmountedRef","keyRef","eventsRef","emit","event","params","boundMutate","revalidateOpts","loading","shouldDeduping","newData","startAt","newState","err_3","dedupe","undefined","currentHookData","latestKeyedData","onFocus","softRevalidate","revalidateOnMount","onUpdate","updatedData","updatedError","needUpdate","reconnect","revalidators","removeEventListener","timer","tick","clearTimeout","latestData","latestError","useMemo","state","defineProperties","enumerable"],"mappings":"yHAEA,IAAIA,EAAUC,MAAMD,QAChBE,EAAUC,OAAOC,KACjBC,EAAUF,OAAOG,UAAUC,eAE/BC,EAAOC,QAAU,SAASC,EAAMC,EAAGC,GACjC,GAAID,IAAMC,EAAG,OAAO,EAEpB,GAAID,GAAKC,GAAiB,iBAALD,GAA6B,iBAALC,EAAe,CAC1D,IAEIC,EACAC,EACAC,EAJAC,EAAOhB,EAAQW,GACfM,EAAOjB,EAAQY,GAKnB,GAAII,GAAQC,EAAM,CAEhB,IADAH,EAASH,EAAEG,SACGF,EAAEE,OAAQ,OAAO,EAC/B,IAAKD,EAAIC,EAAgB,IAARD,KACf,IAAKH,EAAMC,EAAEE,GAAID,EAAEC,IAAK,OAAO,EACjC,OAAO,EAGT,GAAIG,GAAQC,EAAM,OAAO,EAEzB,IAAIC,EAAQP,aAAaQ,KACrBC,EAAQR,aAAaO,KACzB,GAAID,GAASE,EAAO,OAAO,EAC3B,GAAIF,GAASE,EAAO,OAAOT,EAAEU,WAAaT,EAAES,UAE5C,IAAIC,EAAUX,aAAaY,OACvBC,EAAUZ,aAAaW,OAC3B,GAAID,GAAWE,EAAS,OAAO,EAC/B,GAAIF,GAAWE,EAAS,OAAOb,EAAEc,YAAcb,EAAEa,WAEjD,IAAIrB,EAAOF,EAAQS,GAGnB,IAFAG,EAASV,EAAKU,UAECZ,EAAQU,GAAGE,OACxB,OAAO,EAET,IAAKD,EAAIC,EAAgB,IAARD,KACf,IAAKR,EAAQqB,KAAKd,EAAGR,EAAKS,IAAK,OAAO,EAExC,IAAKA,EAAIC,EAAgB,IAARD,KAEf,IAAKH,EAAMC,EADXI,EAAMX,EAAKS,IACQD,EAAEG,IAAO,OAAO,EAGrC,OAAO,EAGT,OAAOJ,IAAIA,GAAKC,IAAIA,I,mECrDP,eAASe,GACtB,OAAOA,GCCM,WAASC,GACtB,GAAiB,MAAbA,EAAmB,OAAOC,EAC9B,IAAIC,EACAC,EACAC,EAAKJ,EAAUK,MAAM,GACrBC,EAAKN,EAAUK,MAAM,GACrBE,EAAKP,EAAUQ,UAAU,GACzBC,EAAKT,EAAUQ,UAAU,GAC7B,OAAO,SAASE,EAAOzB,GAChBA,IAAGiB,EAAKC,EAAK,GAClB,IAAIQ,EAAI,EAAGC,EAAIF,EAAMxB,OAAQ2B,EAAS,IAAIxC,MAAMuC,GAGhD,IAFAC,EAAO,IAAMX,GAAMQ,EAAM,IAAMN,EAAKG,EACpCM,EAAO,IAAMV,GAAMO,EAAM,IAAMJ,EAAKG,EAC7BE,EAAIC,GAAGC,EAAOF,GAAKD,EAAMC,KAAMA,EACtC,OAAOE,ICbI,WAASC,EAAUC,GAChC,MAAkB,uBAAXA,EAAEC,KACH,CAACA,KAAM,oBAAqBC,SAAUF,EAAEG,WAAWC,KAAI,SAASJ,GAAK,OAAOK,EAAQN,EAAUC,OAC9FK,EAAQN,EAAUC,IAGnB,SAASK,EAAQN,EAAUC,GAChC,IAAIM,EAAKN,EAAEM,GACPC,EAAOP,EAAEO,KACTC,EAA6B,MAAhBR,EAAEQ,WAAqB,GAAKR,EAAEQ,WAC3CC,EAAWC,EAAOX,EAAUC,GAChC,OAAa,MAANM,GAAsB,MAARC,EAAe,CAACN,KAAM,UAAWO,WAAYA,EAAYC,SAAUA,GAC1E,MAARF,EAAe,CAACN,KAAM,UAAWK,GAAIA,EAAIE,WAAYA,EAAYC,SAAUA,GAC3E,CAACR,KAAM,UAAWK,GAAIA,EAAIC,KAAMA,EAAMC,WAAYA,EAAYC,SAAUA,GAGzE,SAASC,EAAOX,EAAUC,GAC/B,IAAIW,EAAiB1B,EAAUc,EAASd,WACpC2B,EAAOb,EAASa,KAEpB,SAASC,EAAI3C,EAAG4C,GACVA,EAAO3C,QAAQ2C,EAAOC,MAC1B,IAAK,IAAI/C,EAAI4C,EAAK1C,EAAI,GAAKA,EAAIA,GAAI8C,EAAI,EAAGnB,EAAI7B,EAAEG,OAAQ6C,EAAInB,IAAKmB,EAC/DF,EAAOG,KAAKN,EAAe3C,EAAEgD,GAAIA,IAE/B9C,EAAI,GC5BG,SAASgD,EAAOrB,GAE7B,IADA,IAAIsB,EAAGvB,EAAIsB,EAAM/C,OAAQD,EAAI0B,EAAIC,EAC1B3B,IAAM0B,GAAGuB,EAAID,EAAMhD,GAAIgD,EAAMhD,KAAOgD,EAAMtB,GAAIsB,EAAMtB,GAAKuB,ED0BnDC,CAAQN,EAAQjB,GAG7B,SAASwB,EAAMC,GACb,OAAOX,EAAeW,GAGxB,SAASC,EAAKX,GAEZ,IADA,IAAIE,EAAS,GACJ5C,EAAI,EAAG2B,EAAIe,EAAKzC,OAAQD,EAAI2B,IAAK3B,EAAG2C,EAAID,EAAK1C,GAAI4C,GAE1D,OADIA,EAAO3C,OAAS,GAAG2C,EAAOG,KAAKH,EAAO,IACnCA,EAGT,SAASU,EAAKZ,GAEZ,IADA,IAAIE,EAASS,EAAKX,GACXE,EAAO3C,OAAS,GAAG2C,EAAOG,KAAKH,EAAO,IAC7C,OAAOA,EAGT,SAASW,EAAQb,GACf,OAAOA,EAAKR,IAAIoB,GAkBlB,OAfA,SAASf,EAAST,GAChB,IAAmB0B,EAAfzB,EAAOD,EAAEC,KACb,OAAQA,GACN,IAAK,qBAAsB,MAAO,CAACA,KAAMA,EAAME,WAAYH,EAAEG,WAAWC,IAAIK,IAC5E,IAAK,QAASiB,EAAcL,EAAMrB,EAAE0B,aAAc,MAClD,IAAK,aAAcA,EAAc1B,EAAE0B,YAAYtB,IAAIiB,GAAQ,MAC3D,IAAK,aAAcK,EAAcH,EAAKvB,EAAEY,MAAO,MAC/C,IAAK,kBAAmBc,EAAc1B,EAAEY,KAAKR,IAAImB,GAAO,MACxD,IAAK,UAAWG,EAAcD,EAAQzB,EAAEY,MAAO,MAC/C,IAAK,eAAgBc,EAAc1B,EAAEY,KAAKR,IAAIqB,GAAU,MACxD,QAAS,OAAO,KAElB,MAAO,CAACxB,KAAMA,EAAMyB,YAAaA,GAG5BjB,CAAST,GEnEH,ICEX2B,EAAS,IAAIC,YAAY,IAChB,IAAIC,aAAaF,GAClB,IAAIG,YAAYH,GCJnBI,KAAKC,GAIJD,KAAKE,IACHF,KAAKG,MACPH,KAAKI,IACLJ,KAAKK,K,8DCPA,SAASC,IACpB,MAAwB,qBAAbC,UAC6B,qBAA7BA,SAASC,iBACoB,WAA7BD,SAASC,gBCHT,SAASC,IACpB,MAAgC,qBAArBC,UAAUC,QACVD,UAAUC,OCEzB,IAAIC,EAAQ,IAAIC,QAEZC,EAAU,ECJd,ICGIC,EAAQ,IDHe,WACvB,SAASC,EAAMC,QACS,IAAhBA,IAA0BA,EAAc,IAC5CC,KAAKC,QAAU,IAAIC,IAAI3F,OAAO4F,QAAQJ,IACtCC,KAAKI,YAAc,GAqFvB,OAnFAN,EAAMpF,UAAU2F,IAAM,SAAUlF,GAC5B,IAAImF,EAAON,KAAKO,aAAapF,GAAK,GAClC,OAAO6E,KAAKC,QAAQI,IAAIC,IAE5BR,EAAMpF,UAAU8F,IAAM,SAAUrF,EAAKsF,EAAOC,QACnB,IAAjBA,IAA2BA,GAAe,GAC9C,IAAIJ,EAAON,KAAKO,aAAapF,GAAK,GAClC6E,KAAKC,QAAQO,IAAIF,EAAMG,GACnBC,GACAC,EAAOxF,EAAKsF,GAAO,GACvBT,KAAKY,UAETd,EAAMpF,UAAUF,KAAO,WACnB,OAAOH,MAAMwG,KAAKb,KAAKC,QAAQzF,SAEnCsF,EAAMpF,UAAUoG,IAAM,SAAU3F,GAC5B,IAAImF,EAAON,KAAKO,aAAapF,GAAK,GAClC,OAAO6E,KAAKC,QAAQa,IAAIR,IAE5BR,EAAMpF,UAAUqG,MAAQ,SAAUL,QACT,IAAjBA,IAA2BA,GAAe,GAC1CA,GACAV,KAAKC,QAAQe,SAAQ,SAAU7F,GAAO,OAAOwF,EAAOxF,EAAK,MAAM,MACnE6E,KAAKC,QAAQc,QACbf,KAAKY,UAETd,EAAMpF,UAAUuG,OAAS,SAAU9F,EAAKuF,QACf,IAAjBA,IAA2BA,GAAe,GAC9C,IAAIJ,EAAON,KAAKO,aAAapF,GAAK,GAC9BuF,GACAC,EAAOxF,EAAK,MAAM,GACtB6E,KAAKC,QAAQgB,OAAOX,GACpBN,KAAKY,UAGTd,EAAMpF,UAAU6F,aAAe,SAAUpF,GACrC,IAAI+F,EAAO,KACX,GAAmB,oBAAR/F,EACP,IACIA,EAAMA,IAEV,MAAOgG,GAEHhG,EAAM,GAad,OAVId,MAAMD,QAAQe,IAEd+F,EAAO/F,EACPA,EDjDG,SAAc+F,GACzB,IAAKA,EAAKhG,OACN,MAAO,GAEX,IADA,IAAIC,EAAM,MACDF,EAAI,EAAGA,EAAIiG,EAAKhG,SAAUD,EAAG,CAClC,IAAImG,OAAQ,EACI,OAAZF,EAAKjG,IAAkC,kBAAZiG,EAAKjG,GAS5BmG,EADmB,kBAAZF,EAAKjG,GACJ,IAAMiG,EAAKjG,GAAK,IAGhBoG,OAAOH,EAAKjG,IAInByE,EAAMoB,IAAII,EAAKjG,IAKhBmG,EAAQ1B,EAAMW,IAAIa,EAAKjG,KAJvBmG,EAAQxB,EACRF,EAAMc,IAAIU,EAAKjG,GAAI2E,MAM3BzE,GAAO,IAAMiG,EAEjB,OAAOjG,ECiBOmG,CAAKnG,IAIXA,EAAMkG,OAAOlG,GAAO,IAGjB,CAACA,EAAK+F,EADE/F,EAAM,OAASA,EAAM,KAGxC2E,EAAMpF,UAAU6G,UAAY,SAAUC,GAClC,IAAIC,EAAQzB,KACZ,GAAwB,oBAAbwB,EACP,MAAM,IAAIE,MAAM,2CAEpB,IAAIC,GAAe,EAEnB,OADA3B,KAAKI,YAAYpC,KAAKwD,GACf,WACH,GAAKG,EAAL,CAEAA,GAAe,EACf,IAAIC,EAAQH,EAAMrB,YAAYyB,QAAQL,GAClCI,GAAS,IACTH,EAAMrB,YAAYwB,GAASH,EAAMrB,YAAYqB,EAAMrB,YAAYlF,OAAS,GACxEuG,EAAMrB,YAAYlF,aAK9B4E,EAAMpF,UAAUkG,OAAS,WACrB,IAAK,IAAIkB,EAAK,EAAGC,EAAK/B,KAAKI,YAAa0B,EAAKC,EAAG7G,OAAQ4G,IAAM,EAE1DN,EADeO,EAAGD,QAInBhC,EAzFgB,ICKvBkC,EAAsB,GACtBC,EAAyB,GACzBC,EAAqB,GACrBC,EAAqB,GACrBC,EAAc,GAmBlB,IAAIC,EAAmC,qBAAXC,QACxB9C,UAAS,aAC6D,IAAtE,CAAC,UAAW,MAAMqC,QAAQrC,UAAS,WAAe+C,eAElDC,EAAgB,CAEhBC,cAAe,aACfC,UAAW,aACXC,QAAS,aACTC,aA1BJ,SAAsBC,EAAGC,EAAIC,EAAQC,EAAYC,GAC7C,GAAK7D,OAKD2D,EAAOG,iBAAmBD,EAAKE,WAAaJ,EAAOG,iBAAvD,CAIA,IAAIE,EAAQtE,KAAKuE,IAAIJ,EAAKE,YAAc,EAAG,GACvCG,MAAcxE,KAAKyE,SAAW,KAAQ,GAAKH,IAAUL,EAAOS,mBAChEC,WAAWT,EAAYM,EAASL,KAehCO,mBAAgD,KAA3BnB,EAAiB,GAAK,GAC3CqB,sBAAuB,IACvBC,iBAAkB,IAClBC,eAA2C,KAA1BvB,EAAiB,EAAI,GACtCwB,gBAAiB,EACjBC,mBAAmB,EACnBC,uBAAuB,EACvBC,mBAAmB,EACnBC,oBAAoB,EACpBC,oBAAoB,EACpBC,UAAU,EACVC,QAASC,KAGTC,GAAe,EACnB,GAAsB,qBAAXhC,QAA0BA,OAAOiC,mBAAqBD,EAAc,CAC3E,IAAItB,EAAa,WACb,GAAK5D,KAAwBG,IAE7B,IAAK,IAAIpE,KAAO+G,EACRA,EAAmB/G,GAAK,IACxB+G,EAAmB/G,GAAK,MAGpCmH,OAAOiC,iBAAiB,mBAAoBvB,GAAY,GACxDV,OAAOiC,iBAAiB,QAASvB,GAAY,GAE7CsB,GAAe,EAGJ9B,QCtEA,SAASgC,EAASC,EAAIC,GACjC,IAAIC,GAAU,EACd,OAAO,WAEH,IADA,IAAIzD,EAAO,GACFY,EAAK,EAAGA,EAAK8C,UAAU1J,OAAQ4G,IACpCZ,EAAKY,GAAM8C,UAAU9C,GAErB6C,IAEJA,GAAU,EACVF,EAAGI,WAAM,EAAQ3D,GACjBuC,YAAW,WAAc,OAAQkB,GAAU,IAAWD,KCV9D,IAAII,EAAmBC,wBAAc,IACrCD,EAAiBE,YAAc,mBAChBF,QCHXG,EAAwC,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUhF,GAAS,IAAMiF,EAAKL,EAAUM,KAAKlF,IAAW,MAAOmF,GAAKJ,EAAOI,IACpF,SAASC,EAASpF,GAAS,IAAMiF,EAAKL,EAAS,MAAU5E,IAAW,MAAOmF,GAAKJ,EAAOI,IACvF,SAASF,EAAKI,GAJlB,IAAerF,EAIaqF,EAAOC,KAAOR,EAAQO,EAAOrF,QAJ1CA,EAIyDqF,EAAOrF,MAJhDA,aAAiB2E,EAAI3E,EAAQ,IAAI2E,GAAE,SAAUG,GAAWA,EAAQ9E,OAITuF,KAAKP,EAAWI,GAClGH,GAAML,EAAYA,EAAUR,MAAMK,EAASC,GAAc,KAAKQ,YAGlEM,EAA4C,SAAUf,EAASgB,GAC/D,IAAsGC,EAAGC,EAAGlI,EAAGmI,EAA3GxD,EAAI,CAAEyD,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPrI,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOsI,KAAM,GAAIC,IAAK,IAChG,OAAOJ,EAAI,CAAEV,KAAMe,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXC,SAA0BN,EAAEM,OAAOC,UAAY,WAAa,OAAO5G,OAAUqG,EACvJ,SAASK,EAAK9J,GAAK,OAAO,SAAUiK,GAAK,OACzC,SAAcC,GACV,GAAIX,EAAG,MAAM,IAAIY,UAAU,mCAC3B,KAAOlE,GAAG,IACN,GAAIsD,EAAI,EAAGC,IAAMlI,EAAY,EAAR4I,EAAG,GAASV,EAAC,OAAaU,EAAG,GAAKV,EAAC,SAAelI,EAAIkI,EAAC,SAAelI,EAAEpC,KAAKsK,GAAI,GAAKA,EAAET,SAAWzH,EAAIA,EAAEpC,KAAKsK,EAAGU,EAAG,KAAKf,KAAM,OAAO7H,EAE3J,OADIkI,EAAI,EAAGlI,IAAG4I,EAAK,CAAS,EAARA,EAAG,GAAQ5I,EAAEuC,QACzBqG,EAAG,IACP,KAAK,EAAG,KAAK,EAAG5I,EAAI4I,EAAI,MACxB,KAAK,EAAc,OAAXjE,EAAEyD,QAAgB,CAAE7F,MAAOqG,EAAG,GAAIf,MAAM,GAChD,KAAK,EAAGlD,EAAEyD,QAASF,EAAIU,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKjE,EAAE4D,IAAI3I,MAAO+E,EAAE2D,KAAK1I,MAAO,SACxC,QACI,KAAkBI,GAAZA,EAAI2E,EAAE2D,MAAYtL,OAAS,GAAKgD,EAAEA,EAAEhD,OAAS,MAAkB,IAAV4L,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEjE,EAAI,EAAG,SACjG,GAAc,IAAViE,EAAG,MAAc5I,GAAM4I,EAAG,GAAK5I,EAAE,IAAM4I,EAAG,GAAK5I,EAAE,IAAM,CAAE2E,EAAEyD,MAAQQ,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYjE,EAAEyD,MAAQpI,EAAE,GAAI,CAAE2E,EAAEyD,MAAQpI,EAAE,GAAIA,EAAI4I,EAAI,MAC7D,GAAI5I,GAAK2E,EAAEyD,MAAQpI,EAAE,GAAI,CAAE2E,EAAEyD,MAAQpI,EAAE,GAAI2E,EAAE4D,IAAIzI,KAAK8I,GAAK,MACvD5I,EAAE,IAAI2E,EAAE4D,IAAI3I,MAChB+E,EAAE2D,KAAK1I,MAAO,SAEtBgJ,EAAKZ,EAAKpK,KAAKoJ,EAASrC,GAC1B,MAAO+C,GAAKkB,EAAK,CAAC,EAAGlB,GAAIQ,EAAI,EAjBrB,QAiBoCD,EAAIjI,EAAI,EACtD,GAAY,EAAR4I,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAErG,MAAOqG,EAAG,GAAKA,EAAG,QAAK,EAAQf,MAAM,GArB9BL,CAAK,CAAC9I,EAAGiK,OA8BzDG,EAA8B,qBAAX1E,OAInB2E,EAA4BD,EAAYE,YAAYC,kBACpDC,EAAU,SAAU9G,EAAM+G,QACD,IAArBA,IAA+BA,GAAmB,GAGtD,IAAItF,EAAKlC,EAAMU,aAAaD,GAAOnF,EAAM4G,EAAG,GAAIuF,EAASvF,EAAG,GAC5D,IAAK5G,EACD,OAAOmK,QAAQC,UACnB,IAAIgC,EAAWpF,EAAmBhH,GAClC,GAAIA,GAAOoM,EAAU,CAIjB,IAHA,IAAIC,EAAc3H,EAAMQ,IAAIlF,GACxBsM,EAAe5H,EAAMQ,IAAIiH,GACzBI,EAAW,GACNzM,EAAI,EAAGA,EAAIsM,EAASrM,SAAUD,EACnCyM,EAAS1J,KAAKuJ,EAAStM,GAAGoM,EAAkBG,EAAaC,EAAcxM,EAAI,IAG/E,OAAOqK,QAAQqC,IAAID,GAAU1B,MAAK,WAAc,OAAOnG,EAAMQ,IAAIlF,MAErE,OAAOmK,QAAQC,QAAQ1F,EAAMQ,IAAIlF,KAEjCyM,EAAiB,SAAUzM,EAAK0M,EAAMC,GACtC,IAAIP,EAAWpF,EAAmBhH,GAClC,GAAIA,GAAOoM,EACP,IAAK,IAAItM,EAAI,EAAGA,EAAIsM,EAASrM,SAAUD,EACnCsM,EAAStM,IAAG,EAAO4M,EAAMC,IAIjCnH,EAAS,SAAUL,EAAMyH,EAAOV,GAEhC,YADyB,IAArBA,IAA+BA,GAAmB,GAC/CpC,OAAU,OAAQ,OAAQ,GAAQ,WACrC,IAAI9J,EAAK0M,EAAMC,EAAOE,EAAkBC,EAA4BC,EAAOC,EAAOZ,EAAUG,EAAUzM,EACtG,OAAOgL,EAAYjG,MAAM,SAAU+B,GAC/B,OAAQA,EAAGuE,OACP,KAAK,EAED,KADAnL,EAAM0E,EAAMU,aAAaD,GAAM,IAE3B,MAAO,CAAC,GAEZ,GAAqB,qBAAVyH,EACP,MAAO,CAAC,EAAcX,EAAQ9G,EAAM+G,IAOxC,GAHAjF,EAAYjH,GAAOI,KAAK6M,MAAQ,EAChCJ,EAAmB5F,EAAYjH,GAC/B8M,EAA6BhG,EAAuB9G,IAC9C4M,GAA0B,oBAAVA,EAAuB,MAAO,CAAC,EAAa,GAClEhG,EAAGuE,MAAQ,EACf,KAAK,EAED,OADAvE,EAAGyE,KAAKxI,KAAK,CAAC,EAAG,EAAJ,CAAS,IACf,CAAC,EAAa+J,EAAMlI,EAAMQ,IAAIlF,KACzC,KAAK,EAED,OADA0M,EAAO9F,EAAGwE,OACH,CAAC,EAAa,GACzB,KAAK,EAGD,OAFA2B,EAAQnG,EAAGwE,OACXuB,EAAQI,EACD,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,EAAa,IAC7B,KAAK,EACD,IAAMH,GAA+B,oBAAfA,EAAM/B,KAAsB,MAAO,CAAC,EAAa,IACvEjE,EAAGuE,MAAQ,EACf,KAAK,EAED,OADAvE,EAAGyE,KAAKxI,KAAK,CAAC,EAAG,EAAJ,CAAS,IACf,CAAC,EAAa+J,GACzB,KAAK,EAED,OADAF,EAAO9F,EAAGwE,OACH,CAAC,EAAa,GACzB,KAAK,EAGD,OAFA4B,EAAQpG,EAAGwE,OACXuB,EAAQK,EACD,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,EAAa,IAC7B,KAAK,GACDN,EAAOE,EACPhG,EAAGuE,MAAQ,GACf,KAAK,GAED,GAAI0B,IAAqB5F,EAAYjH,IACjC8M,IAA+BhG,EAAuB9G,GAAM,CAC5D,GAAI2M,EACA,MAAMA,EACV,MAAO,CAAC,EAAcD,GAO1B,GALoB,qBAATA,GAEPhI,EAAMW,IAAIrF,EAAK0M,GAAM,GAEzBN,EAAWpF,EAAmBhH,GAChB,CAEV,IADAuM,EAAW,GACNzM,EAAI,EAAGA,EAAIsM,EAASrM,SAAUD,EAC/ByM,EAAS1J,KAAKuJ,EAAStM,KAAKoM,EAAkBQ,EAAMC,EAAO7M,EAAI,IAGnE,MAAO,CAAC,EAAcqK,QAAQqC,IAAID,GAAU1B,MAAK,WAAc,OAAOnG,EAAMQ,IAAIlF,OAGpF,GAAI2M,EACA,MAAMA,EACV,MAAO,CAAC,EAAcD,WA2b1B/C,EAAiBuD,SAAjC,IAEeC,EAxbf,WAGI,IAFA,IAAI7G,EAAQzB,KACRkB,EAAO,GACFY,EAAK,EAAGA,EAAK8C,UAAU1J,OAAQ4G,IACpCZ,EAAKY,GAAM8C,UAAU9C,GAEzB,IAAIxB,EAAMmE,EAAI1B,EAAS,GACnB7B,EAAKhG,QAAU,IACfoF,EAAOY,EAAK,IAEZA,EAAKhG,OAAS,GACduJ,EAAKvD,EAAK,GACV6B,EAAS7B,EAAK,IAGS,oBAAZA,EAAK,GACZuD,EAAKvD,EAAK,GAEc,kBAAZA,EAAK,KACjB6B,EAAS7B,EAAK,IAOtB,IAAIa,EAAKlC,EAAMU,aAAaD,GAAOnF,EAAM4G,EAAG,GAAIwG,EAASxG,EAAG,GAAIuF,EAASvF,EAAG,GAC5EgB,EAASxI,OAAOiO,OAAO,GAAIhG,EAAeiG,qBAAW3D,GAAmB/B,GACtD,qBAAP0B,IAEPA,EAAK1B,EAAO2F,SAEhB,IAAI3I,EAAcF,EAAMQ,IAAIlF,IAAQ4H,EAAOhD,YACvC4I,EAAe9I,EAAMQ,IAAIiH,GAIzBsB,EAAoBC,iBAAO,CAC3BhB,MAAM,EACNC,OAAO,EACPgB,cAAc,IAEdC,EAAWF,iBAAO,CAClBhB,KAAM9H,EACN+H,MAAOa,EACPG,cAAc,IAEdE,EAAWC,mBAAS,MAAM,GAC1BC,EAAWC,uBAAY,SAAUC,GACjC,IAAIC,GAAoB,EACxB,IAAK,IAAItL,KAAKqL,EACVL,EAASO,QAAQvL,GAAKqL,EAAQrL,GAC1B6K,EAAkBU,QAAQvL,KAC1BsL,GAAoB,IAGxBA,GAAqBtG,EAAOoB,WAC5B6E,EAAS,MAEd,IAECO,EAAeV,kBAAO,GACtBW,EAASX,iBAAO1N,GAEhBsO,EAAYZ,iBAAO,CACnBa,KAAM,SAAUC,GAEZ,IADA,IAAIC,EAAS,GACJ9H,EAAK,EAAGA,EAAK8C,UAAU1J,OAAQ4G,IACpC8H,EAAO9H,EAAK,GAAK8C,UAAU9C,GAE3ByH,EAAaD,SAEjBvG,EAAO4G,GAAO9E,MAAM9B,EAAQ6G,MAGhCC,EAAcV,uBAAY,SAAUtB,EAAMR,GAC1C,OAAO1G,EAAOxF,EAAK0M,EAAMR,KAC1B,CAAClM,IAEA6H,EAAamG,uBAAY,SAAUW,GAEnC,YADuB,IAAnBA,IAA6BA,EAAiB,IAC3C7E,EAAUxD,OAAO,OAAQ,GAAQ,WACpC,IAAIsI,EAASC,EAAgBC,EAASC,EAASC,EAAUC,EAAOjH,EAChE,OAAO8C,EAAYjG,MAAM,SAAU+B,GAC/B,OAAQA,EAAGuE,OACP,KAAK,EACD,IAAKnL,IAAQsJ,EACT,MAAO,CAAC,GAAc,GAC1B,GAAI8E,EAAaD,QACb,MAAO,CAAC,GAAc,GAC1BQ,EAAiBvP,OAAOiO,OAAO,CAAE6B,QAAQ,GAASP,GAClDC,GAAU,EACVC,EAAqD,qBAA7BhI,EAAoB7G,IAAwB2O,EAAeO,OACnFtI,EAAGuE,MAAQ,EACf,KAAK,EAOD,OANAvE,EAAGyE,KAAKxI,KAAK,CAAC,EAAG,EAAJ,CAAS,IACtBkL,EAAS,CACLJ,cAAc,IAElBmB,OAAU,EACVC,OAAU,EACLF,GAGLE,EAAUjI,EAAuB9G,GAC1B,CAAC,EAAa6G,EAAoB7G,KAJb,CAAC,EAAa,GAK9C,KAAK,EAED,OADA8O,EAAUlI,EAAGwE,OACN,CAAC,EAAa,GACzB,KAAK,EA6BD,OApBIvE,EAAoB7G,KAGpBiH,EAAYjH,GAAOI,KAAK6M,MAAQ,GAIhCrF,EAAOa,iBAAmB/D,EAAMQ,IAAIlF,IACpCsI,YAAW,WACHsG,GACAN,EAAUH,QAAQI,KAAK,gBAAiBvO,EAAK4H,KAClDA,EAAOa,gBAGV5B,EAAoB7G,GADT,OAAXoN,EAC2B9D,EAAGI,WAAM,EAAQ0D,GAGjB9D,EAAGtJ,GAElC8G,EAAuB9G,GAAO+O,EAAU3O,KAAK6M,MACtC,CAAC,EAAapG,EAAoB7G,IAC7C,KAAK,EACD8O,EAAUlI,EAAGwE,OACb9C,YAAW,kBACAzB,EAAoB7G,UACpB8G,EAAuB9G,KAC/B4H,EAAOY,kBAGV8F,EAAUH,QAAQI,KAAK,YAAaO,EAAS9O,EAAK4H,GAClDhB,EAAGuE,MAAQ,EACf,KAAK,EAID,OAAIlE,EAAYjH,IAAQ+O,GAAW9H,EAAYjH,IAC3C+N,EAAS,CAAEJ,cAAc,IAClB,CAAC,GAAc,KAE1BjJ,EAAMW,IAAIrF,EAAK8O,GAAS,GACxBpK,EAAMW,IAAI8G,OAAQgD,GAAW,GAC7BH,EAAW,CACPrB,cAAc,GAEoB,qBAA3BC,EAASO,QAAQxB,QAExBqC,EAASrC,WAAQwC,GAEhBvH,EAAOqB,QAAQ2E,EAASO,QAAQzB,KAAMoC,KAGvCE,EAAStC,KAAOoC,GAGpBf,EAASiB,GACJH,GAEDpC,EAAezM,EAAK8O,OAASK,GAE1B,CAAC,EAAa,IACzB,KAAK,EAwBD,OAvBAF,EAAQrI,EAAGwE,cACJvE,EAAoB7G,UACpB8G,EAAuB9G,GAC9B0E,EAAMW,IAAI8G,EAAQ8C,GAAO,GAGrBrB,EAASO,QAAQxB,QAAUsC,IAE3BlB,EAAS,CACLJ,cAAc,EACdhB,MAAOsC,IAENJ,GAEDpC,EAAezM,OAAKmP,EAAWF,IAIvCX,EAAUH,QAAQI,KAAK,UAAWU,EAAOjP,EAAK4H,GAC1CA,EAAOmB,qBACPf,GAAc2G,EAAe3G,YAAc,GAAK,EAChDsG,EAAUH,QAAQI,KAAK,eAAgBU,EAAOjP,EAAK4H,EAAQC,EAAYzI,OAAOiO,OAAO,CAAE6B,QAAQ,GAAQP,EAAgB,CAAE3G,WAAYA,MAElI,CAAC,EAAa,GACzB,KAAK,EAED,OADA4G,GAAU,EACH,CAAC,GAAc,YAIvC,CAAC5O,IAgKJ,GA9JA8L,GAA0B,WACtB,GAAK9L,EAAL,CAGAoO,EAAaD,SAAU,EAIvB,IAAIiB,EAAkBxB,EAASO,QAAQzB,KACnC2C,EAAkB3K,EAAMQ,IAAIlF,IAAQ4H,EAAOhD,YAE3CyJ,EAAOF,UAAYnO,GAClB4H,EAAOqB,QAAQmG,EAAiBC,KACjCtB,EAAS,CAAErB,KAAM2C,IACjBhB,EAAOF,QAAUnO,GAGrB,IAgBIsP,EAhBAC,EAAiB,WAAc,OAAO1H,EAAW,CAAEqH,QAAQ,MAE3DtH,EAAO4H,oBACL5H,EAAOhD,kBAA4CuK,IAA7BvH,EAAO4H,qBACA,qBAApBH,IACNxD,GACD1E,OAAM,oBAGNA,OAAM,oBAAwBoI,GAG9BA,KAKJ3H,EAAOe,oBAGP2G,EAAUjG,EAASkG,EAAgB3H,EAAOW,uBACrCxB,EAAmB/G,GAIpB+G,EAAmB/G,GAAK6C,KAAKyM,GAH7BvI,EAAmB/G,GAAO,CAACsP,IAOnC,IAAIG,EAAW,SAAUvD,EAAkBwD,EAAaC,EAAcT,QACzC,IAArBhD,IAA+BA,GAAmB,QACvC,IAAXgD,IAAqBA,GAAS,GAElC,IAAIF,EAAW,GACXY,GAAa,EAejB,MAd2B,qBAAhBF,GACN9H,EAAOqB,QAAQ2E,EAASO,QAAQzB,KAAMgD,KACvCV,EAAStC,KAAOgD,EAChBE,GAAa,GAIbhC,EAASO,QAAQxB,QAAUgD,IAC3BX,EAASrC,MAAQgD,EACjBC,GAAa,GAEbA,GACA7B,EAASiB,KAET9C,IACIgD,EACOK,IAGA1H,MAMdb,EAAmBhH,GAIpBgH,EAAmBhH,GAAK6C,KAAK4M,GAH7BzI,EAAmBhH,GAAO,CAACyP,GAM/B,IAAII,EAAY,KAIhB,OAHKhE,GAAa1E,OAAOiC,kBAAoBxB,EAAOgB,uBAChDzB,OAAOiC,iBAAiB,SAAWyG,EAAYN,GAE5C,WAMC,IAUIO,EACArJ,GAfRsH,EAAW,WAAc,OAAO,MAEhCK,EAAaD,SAAU,EACnBmB,GAAWvI,EAAmB/G,OAE1ByG,GADAqJ,EAAe/I,EAAmB/G,IACb0G,QAAQ4I,KACpB,IAGTQ,EAAarJ,GAASqJ,EAAaA,EAAa/P,OAAS,GACzD+P,EAAanN,QAGjBqE,EAAmBhH,MAEfyG,GADAqJ,EAAe9I,EAAmBhH,IACb0G,QAAQ+I,KACpB,IACTK,EAAarJ,GAASqJ,EAAaA,EAAa/P,OAAS,GACzD+P,EAAanN,SAGhBkJ,GAAa1E,OAAO4I,qBAAqC,OAAdF,GAC5C1I,OAAO4I,oBAAoB,SAAUF,OAG9C,CAAC7P,EAAK6H,IAETiE,GAA0B,WACtB,IAAIkE,EAAQ,KA6BZ,OAHIpI,EAAOc,kBACPsH,EAAQ1H,YA1BD,SAAP2H,IAAqB,OAAOnG,EAAUxD,OAAO,OAAQ,GAAQ,WAC7D,OAAOwE,EAAYjG,MAAM,SAAU+B,GAC/B,OAAQA,EAAGuE,OACP,KAAK,EACD,OAAOyC,EAASO,QAAQxB,QACnB/E,EAAOiB,oBAAqB5E,MAC5B2D,EAAOkB,qBAAsB1E,IAAqB,CAAC,EAAa,GAI9D,CAAC,EAAayD,EAAW,CAAEqH,QAAQ,KAC9C,KAAK,EAIDtI,EAAGwE,OACHxE,EAAGuE,MAAQ,EACf,KAAK,EAID,OAHIvD,EAAOc,kBACPsH,EAAQ1H,WAAW2H,EAAMrI,EAAOc,kBAE7B,CAAC,YAKKd,EAAOc,kBAE7B,WACCsH,GACAE,aAAaF,MAEtB,CACCpI,EAAOc,gBACPd,EAAOiB,kBACPjB,EAAOkB,mBACPjB,IAGAD,EAAOoB,SAAU,CAIjB,IAAImH,EAAazL,EAAMQ,IAAIlF,IAAQ4E,EAC/BwL,EAAc1L,EAAMQ,IAAIiH,IAAWqB,EACvC,GAA0B,qBAAf2C,GACgB,qBAAhBC,EAA6B,CAOpC,GALKvJ,EAAoB7G,IAGrB6H,IAEAhB,EAAoB7G,IACqB,oBAAlC6G,EAAoB7G,GAAK6K,KAEhC,MAAMhE,EAAoB7G,GAG9BmQ,EAAatJ,EAAoB7G,GAErC,GAA0B,qBAAfmQ,GAA8BC,EAErC,MAAMA,EAIV,MAAO,CACHzD,MAAOyD,EACP1D,KAAMyD,EACNtI,WAAYA,EACZrC,OAAQkJ,EACRf,aAAcC,EAASO,QAAQR,cAKvC,OAAO0C,mBAAQ,WACX,IAAIC,EAAQ,CAAEzI,WAAYA,EAAYrC,OAAQkJ,GA2B9C,OA1BAtP,OAAOmR,iBAAiBD,EAAO,CAC3B3D,MAAO,CAIHzH,IAAK,WAED,OADAuI,EAAkBU,QAAQxB,OAAQ,EAC3B0B,EAAOF,UAAYnO,EAAM4N,EAASO,QAAQxB,MAAQa,GAE7DgD,YAAY,GAEhB9D,KAAM,CACFxH,IAAK,WAED,OADAuI,EAAkBU,QAAQzB,MAAO,EAC1B2B,EAAOF,UAAYnO,EAAM4N,EAASO,QAAQzB,KAAO9H,GAE5D4L,YAAY,GAEhB7C,aAAc,CACVzI,IAAK,WAED,OADAuI,EAAkBU,QAAQR,cAAe,EAClCC,EAASO,QAAQR,cAE5B6C,YAAY,KAGbF,IACR,CAACzI,KCrfW,IAAI9C,ICpFRoI","file":"static/js/12.66eeda3a.chunk.js","sourcesContent":["'use strict';\n\nvar isArray = Array.isArray;\nvar keyList = Object.keys;\nvar hasProp = Object.prototype.hasOwnProperty;\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    var arrA = isArray(a)\n      , arrB = isArray(b)\n      , i\n      , length\n      , key;\n\n    if (arrA && arrB) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n    if (arrA != arrB) return false;\n\n    var dateA = a instanceof Date\n      , dateB = b instanceof Date;\n    if (dateA != dateB) return false;\n    if (dateA && dateB) return a.getTime() == b.getTime();\n\n    var regexpA = a instanceof RegExp\n      , regexpB = b instanceof RegExp;\n    if (regexpA != regexpB) return false;\n    if (regexpA && regexpB) return a.toString() == b.toString();\n\n    var keys = keyList(a);\n    length = keys.length;\n\n    if (length !== keyList(b).length)\n      return false;\n\n    for (i = length; i-- !== 0;)\n      if (!hasProp.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      key = keys[i];\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  return a!==a && b!==b;\n};\n","export default function(x) {\n  return x;\n}\n","import identity from \"./identity\";\n\nexport default function(transform) {\n  if (transform == null) return identity;\n  var x0,\n      y0,\n      kx = transform.scale[0],\n      ky = transform.scale[1],\n      dx = transform.translate[0],\n      dy = transform.translate[1];\n  return function(input, i) {\n    if (!i) x0 = y0 = 0;\n    var j = 2, n = input.length, output = new Array(n);\n    output[0] = (x0 += input[0]) * kx + dx;\n    output[1] = (y0 += input[1]) * ky + dy;\n    while (j < n) output[j] = input[j], ++j;\n    return output;\n  };\n}\n","import reverse from \"./reverse\";\nimport transform from \"./transform\";\n\nexport default function(topology, o) {\n  return o.type === \"GeometryCollection\"\n      ? {type: \"FeatureCollection\", features: o.geometries.map(function(o) { return feature(topology, o); })}\n      : feature(topology, o);\n}\n\nexport function feature(topology, o) {\n  var id = o.id,\n      bbox = o.bbox,\n      properties = o.properties == null ? {} : o.properties,\n      geometry = object(topology, o);\n  return id == null && bbox == null ? {type: \"Feature\", properties: properties, geometry: geometry}\n      : bbox == null ? {type: \"Feature\", id: id, properties: properties, geometry: geometry}\n      : {type: \"Feature\", id: id, bbox: bbox, properties: properties, geometry: geometry};\n}\n\nexport function object(topology, o) {\n  var transformPoint = transform(topology.transform),\n      arcs = topology.arcs;\n\n  function arc(i, points) {\n    if (points.length) points.pop();\n    for (var a = arcs[i < 0 ? ~i : i], k = 0, n = a.length; k < n; ++k) {\n      points.push(transformPoint(a[k], k));\n    }\n    if (i < 0) reverse(points, n);\n  }\n\n  function point(p) {\n    return transformPoint(p);\n  }\n\n  function line(arcs) {\n    var points = [];\n    for (var i = 0, n = arcs.length; i < n; ++i) arc(arcs[i], points);\n    if (points.length < 2) points.push(points[0]); // This should never happen per the specification.\n    return points;\n  }\n\n  function ring(arcs) {\n    var points = line(arcs);\n    while (points.length < 4) points.push(points[0]); // This may happen if an arc has only two points.\n    return points;\n  }\n\n  function polygon(arcs) {\n    return arcs.map(ring);\n  }\n\n  function geometry(o) {\n    var type = o.type, coordinates;\n    switch (type) {\n      case \"GeometryCollection\": return {type: type, geometries: o.geometries.map(geometry)};\n      case \"Point\": coordinates = point(o.coordinates); break;\n      case \"MultiPoint\": coordinates = o.coordinates.map(point); break;\n      case \"LineString\": coordinates = line(o.arcs); break;\n      case \"MultiLineString\": coordinates = o.arcs.map(line); break;\n      case \"Polygon\": coordinates = polygon(o.arcs); break;\n      case \"MultiPolygon\": coordinates = o.arcs.map(polygon); break;\n      default: return null;\n    }\n    return {type: type, coordinates: coordinates};\n  }\n\n  return geometry(o);\n}\n","export default function(array, n) {\n  var t, j = array.length, i = j - n;\n  while (i < --j) t = array[i], array[i++] = array[j], array[j] = t;\n}\n","export default function(a, x) {\n  var lo = 0, hi = a.length;\n  while (lo < hi) {\n    var mid = lo + hi >>> 1;\n    if (a[mid] < x) lo = mid + 1;\n    else hi = mid;\n  }\n  return lo;\n}\n","// TODO if quantized, use simpler Int32 hashing?\n\nvar buffer = new ArrayBuffer(16),\n    floats = new Float64Array(buffer),\n    uints = new Uint32Array(buffer);\n\nexport default function(point) {\n  floats[0] = point[0];\n  floats[1] = point[1];\n  var hash = uints[0] ^ uints[1];\n  hash = hash << 5 ^ hash >> 7 ^ uints[2] ^ uints[3];\n  return hash & 0x7fffffff;\n}\n","var pi = Math.PI,\n    tau = 2 * pi,\n    quarterPi = pi / 4,\n    radians = pi / 180,\n    abs = Math.abs,\n    atan2 = Math.atan2,\n    cos = Math.cos,\n    sin = Math.sin;\n\nfunction halfArea(ring, closed) {\n  var i = 0,\n      n = ring.length,\n      sum = 0,\n      point = ring[closed ? i++ : n - 1],\n      lambda0, lambda1 = point[0] * radians,\n      phi1 = (point[1] * radians) / 2 + quarterPi,\n      cosPhi0, cosPhi1 = cos(phi1),\n      sinPhi0, sinPhi1 = sin(phi1);\n\n  for (; i < n; ++i) {\n    point = ring[i];\n    lambda0 = lambda1, lambda1 = point[0] * radians;\n    phi1 = (point[1] * radians) / 2 + quarterPi;\n    cosPhi0 = cosPhi1, cosPhi1 = cos(phi1);\n    sinPhi0 = sinPhi1, sinPhi1 = sin(phi1);\n\n    // Spherical excess E for a spherical triangle with vertices: south pole,\n    // previous point, current point.  Uses a formula derived from Cagnoliâ€™s\n    // theorem.  See Todhunter, Spherical Trig. (1871), Sec. 103, Eq. (2).\n    // See https://github.com/d3/d3-geo/blob/master/README.md#geoArea\n    var dLambda = lambda1 - lambda0,\n        sdLambda = dLambda >= 0 ? 1 : -1,\n        adLambda = sdLambda * dLambda,\n        k = sinPhi0 * sinPhi1,\n        u = cosPhi0 * cosPhi1 + k * cos(adLambda),\n        v = k * sdLambda * sin(adLambda);\n    sum += atan2(v, u);\n  }\n\n  return sum;\n}\n\nexport function sphericalRingArea(ring, interior) {\n  var sum = halfArea(ring, true);\n  if (interior) sum *= -1;\n  return (sum < 0 ? tau + sum : sum) * 2;\n}\n\nexport function sphericalTriangleArea(t) {\n  return abs(halfArea(t, false)) * 2;\n}\n","export default function isDocumentVisible() {\n    if (typeof document !== 'undefined' &&\n        typeof document.visibilityState !== 'undefined') {\n        return document.visibilityState !== 'hidden';\n    }\n    // always assume it's visible\n    return true;\n}\n","export default function isOnline() {\n    if (typeof navigator.onLine !== 'undefined') {\n        return navigator.onLine;\n    }\n    // always assume it's online\n    return true;\n}\n","// use WeakMap to store the object->key mapping\n// so the objects can be garbage collected.\n// WeakMap uses a hashtable under the hood, so the lookup\n// complexity is almost O(1).\nvar table = new WeakMap();\n// counter of the key\nvar counter = 0;\n// hashes an array of objects and returns a string\nexport default function hash(args) {\n    if (!args.length)\n        return '';\n    var key = 'arg';\n    for (var i = 0; i < args.length; ++i) {\n        var _hash = void 0;\n        if (args[i] === null || typeof args[i] !== 'object') {\n            // need to consider the case that args[i] is a string:\n            // args[i]        _hash\n            // \"undefined\" -> '\"undefined\"'\n            // undefined   -> 'undefined'\n            // 123         -> '123'\n            // null        -> 'null'\n            // \"null\"      -> '\"null\"'\n            if (typeof args[i] === 'string') {\n                _hash = '\"' + args[i] + '\"';\n            }\n            else {\n                _hash = String(args[i]);\n            }\n        }\n        else {\n            if (!table.has(args[i])) {\n                _hash = counter;\n                table.set(args[i], counter++);\n            }\n            else {\n                _hash = table.get(args[i]);\n            }\n        }\n        key += '@' + _hash;\n    }\n    return key;\n}\n","import { mutate } from './use-swr';\nimport hash from './libs/hash';\nvar Cache = /** @class */ (function () {\n    function Cache(initialData) {\n        if (initialData === void 0) { initialData = {}; }\n        this.__cache = new Map(Object.entries(initialData));\n        this.__listeners = [];\n    }\n    Cache.prototype.get = function (key) {\n        var _key = this.serializeKey(key)[0];\n        return this.__cache.get(_key);\n    };\n    Cache.prototype.set = function (key, value, shouldNotify) {\n        if (shouldNotify === void 0) { shouldNotify = true; }\n        var _key = this.serializeKey(key)[0];\n        this.__cache.set(_key, value);\n        if (shouldNotify)\n            mutate(key, value, false);\n        this.notify();\n    };\n    Cache.prototype.keys = function () {\n        return Array.from(this.__cache.keys());\n    };\n    Cache.prototype.has = function (key) {\n        var _key = this.serializeKey(key)[0];\n        return this.__cache.has(_key);\n    };\n    Cache.prototype.clear = function (shouldNotify) {\n        if (shouldNotify === void 0) { shouldNotify = true; }\n        if (shouldNotify)\n            this.__cache.forEach(function (key) { return mutate(key, null, false); });\n        this.__cache.clear();\n        this.notify();\n    };\n    Cache.prototype.delete = function (key, shouldNotify) {\n        if (shouldNotify === void 0) { shouldNotify = true; }\n        var _key = this.serializeKey(key)[0];\n        if (shouldNotify)\n            mutate(key, null, false);\n        this.__cache.delete(_key);\n        this.notify();\n    };\n    // TODO: introduce namespace for the cache\n    Cache.prototype.serializeKey = function (key) {\n        var args = null;\n        if (typeof key === 'function') {\n            try {\n                key = key();\n            }\n            catch (err) {\n                // dependencies not ready\n                key = '';\n            }\n        }\n        if (Array.isArray(key)) {\n            // args array\n            args = key;\n            key = hash(key);\n        }\n        else {\n            // convert null to ''\n            key = String(key || '');\n        }\n        var errorKey = key ? 'err@' + key : '';\n        return [key, args, errorKey];\n    };\n    Cache.prototype.subscribe = function (listener) {\n        var _this = this;\n        if (typeof listener !== 'function') {\n            throw new Error('Expected the listener to be a function.');\n        }\n        var isSubscribed = true;\n        this.__listeners.push(listener);\n        return function () {\n            if (!isSubscribed)\n                return;\n            isSubscribed = false;\n            var index = _this.__listeners.indexOf(listener);\n            if (index > -1) {\n                _this.__listeners[index] = _this.__listeners[_this.__listeners.length - 1];\n                _this.__listeners.length--;\n            }\n        };\n    };\n    // Notify Cache subscribers about a change in the cache\n    Cache.prototype.notify = function () {\n        for (var _i = 0, _a = this.__listeners; _i < _a.length; _i++) {\n            var listener = _a[_i];\n            listener();\n        }\n    };\n    return Cache;\n}());\nexport default Cache;\n","import deepEqual from 'fast-deep-equal';\nimport isDocumentVisible from './libs/is-document-visible';\nimport isOnline from './libs/is-online';\nimport Cache from './cache';\n// cache\nvar cache = new Cache();\n// state managers\nvar CONCURRENT_PROMISES = {};\nvar CONCURRENT_PROMISES_TS = {};\nvar FOCUS_REVALIDATORS = {};\nvar CACHE_REVALIDATORS = {};\nvar MUTATION_TS = {};\n// error retry\nfunction onErrorRetry(_, __, config, revalidate, opts) {\n    if (!isDocumentVisible()) {\n        // if it's hidden, stop\n        // it will auto revalidate when focus\n        return;\n    }\n    if (config.errorRetryCount && opts.retryCount > config.errorRetryCount) {\n        return;\n    }\n    // exponential backoff\n    var count = Math.min(opts.retryCount || 0, 8);\n    var timeout = ~~((Math.random() + 0.5) * (1 << count)) * config.errorRetryInterval;\n    setTimeout(revalidate, timeout, opts);\n}\n// client side: need to adjust the config\n// based on the browser status\n// slow connection (<= 70Kbps)\nvar slowConnection = typeof window !== 'undefined' &&\n    navigator['connection'] &&\n    ['slow-2g', '2g'].indexOf(navigator['connection'].effectiveType) !== -1;\n// config\nvar defaultConfig = {\n    // events\n    onLoadingSlow: function () { },\n    onSuccess: function () { },\n    onError: function () { },\n    onErrorRetry: onErrorRetry,\n    errorRetryInterval: (slowConnection ? 10 : 5) * 1000,\n    focusThrottleInterval: 5 * 1000,\n    dedupingInterval: 2 * 1000,\n    loadingTimeout: (slowConnection ? 5 : 3) * 1000,\n    refreshInterval: 0,\n    revalidateOnFocus: true,\n    revalidateOnReconnect: true,\n    refreshWhenHidden: false,\n    refreshWhenOffline: false,\n    shouldRetryOnError: true,\n    suspense: false,\n    compare: deepEqual\n};\n// Focus revalidate\nvar eventsBinded = false;\nif (typeof window !== 'undefined' && window.addEventListener && !eventsBinded) {\n    var revalidate = function () {\n        if (!isDocumentVisible() || !isOnline())\n            return;\n        for (var key in FOCUS_REVALIDATORS) {\n            if (FOCUS_REVALIDATORS[key][0])\n                FOCUS_REVALIDATORS[key][0]();\n        }\n    };\n    window.addEventListener('visibilitychange', revalidate, false);\n    window.addEventListener('focus', revalidate, false);\n    // only bind the events once\n    eventsBinded = true;\n}\nexport { CONCURRENT_PROMISES, CONCURRENT_PROMISES_TS, FOCUS_REVALIDATORS, CACHE_REVALIDATORS, MUTATION_TS, cache };\nexport default defaultConfig;\n","export default function throttle(fn, interval) {\n    var pending = false;\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (pending)\n            return;\n        pending = true;\n        fn.apply(void 0, args);\n        setTimeout(function () { return (pending = false); }, interval);\n    };\n}\n","import { createContext } from 'react';\nvar SWRConfigContext = createContext({});\nSWRConfigContext.displayName = 'SWRConfigContext';\nexport default SWRConfigContext;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { useCallback, useContext, useEffect, useLayoutEffect, useState, useRef, useMemo } from 'react';\nimport defaultConfig, { CACHE_REVALIDATORS, CONCURRENT_PROMISES, CONCURRENT_PROMISES_TS, FOCUS_REVALIDATORS, MUTATION_TS, cache } from './config';\nimport isDocumentVisible from './libs/is-document-visible';\nimport isOnline from './libs/is-online';\nimport throttle from './libs/throttle';\nimport SWRConfigContext from './swr-config-context';\nvar IS_SERVER = typeof window === 'undefined';\n// React currently throws a warning when using useLayoutEffect on the server.\n// To get around it, we can conditionally useEffect on the server (no-op) and\n// useLayoutEffect in the browser.\nvar useIsomorphicLayoutEffect = IS_SERVER ? useEffect : useLayoutEffect;\nvar trigger = function (_key, shouldRevalidate) {\n    if (shouldRevalidate === void 0) { shouldRevalidate = true; }\n    // we are ignoring the second argument which correspond to the arguments\n    // the fetcher will receive when key is an array\n    var _a = cache.serializeKey(_key), key = _a[0], keyErr = _a[2];\n    if (!key)\n        return Promise.resolve();\n    var updaters = CACHE_REVALIDATORS[key];\n    if (key && updaters) {\n        var currentData = cache.get(key);\n        var currentError = cache.get(keyErr);\n        var promises = [];\n        for (var i = 0; i < updaters.length; ++i) {\n            promises.push(updaters[i](shouldRevalidate, currentData, currentError, i > 0));\n        }\n        // return new updated value\n        return Promise.all(promises).then(function () { return cache.get(key); });\n    }\n    return Promise.resolve(cache.get(key));\n};\nvar broadcastState = function (key, data, error) {\n    var updaters = CACHE_REVALIDATORS[key];\n    if (key && updaters) {\n        for (var i = 0; i < updaters.length; ++i) {\n            updaters[i](false, data, error);\n        }\n    }\n};\nvar mutate = function (_key, _data, shouldRevalidate) {\n    if (shouldRevalidate === void 0) { shouldRevalidate = true; }\n    return __awaiter(void 0, void 0, void 0, function () {\n        var key, data, error, beforeMutationTs, beforeConcurrentPromisesTs, err_1, err_2, updaters, promises, i;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    key = cache.serializeKey(_key)[0];\n                    if (!key)\n                        return [2 /*return*/];\n                    // if there is no new data, call revalidate against the key\n                    if (typeof _data === 'undefined')\n                        return [2 /*return*/, trigger(_key, shouldRevalidate)\n                            // update timestamp\n                        ];\n                    // update timestamp\n                    MUTATION_TS[key] = Date.now() - 1;\n                    beforeMutationTs = MUTATION_TS[key];\n                    beforeConcurrentPromisesTs = CONCURRENT_PROMISES_TS[key];\n                    if (!(_data && typeof _data === 'function')) return [3 /*break*/, 5];\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, _data(cache.get(key))];\n                case 2:\n                    data = _a.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    err_1 = _a.sent();\n                    error = err_1;\n                    return [3 /*break*/, 4];\n                case 4: return [3 /*break*/, 11];\n                case 5:\n                    if (!(_data && typeof _data.then === 'function')) return [3 /*break*/, 10];\n                    _a.label = 6;\n                case 6:\n                    _a.trys.push([6, 8, , 9]);\n                    return [4 /*yield*/, _data];\n                case 7:\n                    data = _a.sent();\n                    return [3 /*break*/, 9];\n                case 8:\n                    err_2 = _a.sent();\n                    error = err_2;\n                    return [3 /*break*/, 9];\n                case 9: return [3 /*break*/, 11];\n                case 10:\n                    data = _data;\n                    _a.label = 11;\n                case 11:\n                    // Check if other mutations have occurred since we've started awaiting, if so then do not persist this change\n                    if (beforeMutationTs !== MUTATION_TS[key] ||\n                        beforeConcurrentPromisesTs !== CONCURRENT_PROMISES_TS[key]) {\n                        if (error)\n                            throw error;\n                        return [2 /*return*/, data];\n                    }\n                    if (typeof data !== 'undefined') {\n                        // update cached data, avoid notifying from the cache\n                        cache.set(key, data, false);\n                    }\n                    updaters = CACHE_REVALIDATORS[key];\n                    if (updaters) {\n                        promises = [];\n                        for (i = 0; i < updaters.length; ++i) {\n                            promises.push(updaters[i](!!shouldRevalidate, data, error, i > 0));\n                        }\n                        // return new updated value\n                        return [2 /*return*/, Promise.all(promises).then(function () { return cache.get(key); })];\n                    }\n                    // throw error or return data to be used by caller of mutate\n                    if (error)\n                        throw error;\n                    return [2 /*return*/, data];\n            }\n        });\n    });\n};\nfunction useSWR() {\n    var _this = this;\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var _key, fn, config = {};\n    if (args.length >= 1) {\n        _key = args[0];\n    }\n    if (args.length > 2) {\n        fn = args[1];\n        config = args[2];\n    }\n    else {\n        if (typeof args[1] === 'function') {\n            fn = args[1];\n        }\n        else if (typeof args[1] === 'object') {\n            config = args[1];\n        }\n    }\n    // we assume `key` as the identifier of the request\n    // `key` can change but `fn` shouldn't\n    // (because `revalidate` only depends on `key`)\n    // `keyErr` is the cache key for error objects\n    var _a = cache.serializeKey(_key), key = _a[0], fnArgs = _a[1], keyErr = _a[2];\n    config = Object.assign({}, defaultConfig, useContext(SWRConfigContext), config);\n    if (typeof fn === 'undefined') {\n        // use a global fetcher\n        fn = config.fetcher;\n    }\n    var initialData = cache.get(key) || config.initialData;\n    var initialError = cache.get(keyErr);\n    // if a state is accessed (data, error or isValidating),\n    // we add the state to dependencies so if the state is\n    // updated in the future, we can trigger a rerender\n    var stateDependencies = useRef({\n        data: false,\n        error: false,\n        isValidating: false\n    });\n    var stateRef = useRef({\n        data: initialData,\n        error: initialError,\n        isValidating: false\n    });\n    var rerender = useState(null)[1];\n    var dispatch = useCallback(function (payload) {\n        var shouldUpdateState = false;\n        for (var k in payload) {\n            stateRef.current[k] = payload[k];\n            if (stateDependencies.current[k]) {\n                shouldUpdateState = true;\n            }\n        }\n        if (shouldUpdateState || config.suspense) {\n            rerender({});\n        }\n    }, []);\n    // error ref inside revalidate (is last request errored?)\n    var unmountedRef = useRef(false);\n    var keyRef = useRef(key);\n    // do unmount check for callbacks\n    var eventsRef = useRef({\n        emit: function (event) {\n            var params = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                params[_i - 1] = arguments[_i];\n            }\n            if (unmountedRef.current)\n                return;\n            config[event].apply(config, params);\n        }\n    });\n    var boundMutate = useCallback(function (data, shouldRevalidate) {\n        return mutate(key, data, shouldRevalidate);\n    }, [key]);\n    // start a revalidation\n    var revalidate = useCallback(function (revalidateOpts) {\n        if (revalidateOpts === void 0) { revalidateOpts = {}; }\n        return __awaiter(_this, void 0, void 0, function () {\n            var loading, shouldDeduping, newData, startAt, newState, err_3, retryCount;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!key || !fn)\n                            return [2 /*return*/, false];\n                        if (unmountedRef.current)\n                            return [2 /*return*/, false];\n                        revalidateOpts = Object.assign({ dedupe: false }, revalidateOpts);\n                        loading = true;\n                        shouldDeduping = typeof CONCURRENT_PROMISES[key] !== 'undefined' && revalidateOpts.dedupe;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 6, , 7]);\n                        dispatch({\n                            isValidating: true\n                        });\n                        newData = void 0;\n                        startAt = void 0;\n                        if (!shouldDeduping) return [3 /*break*/, 3];\n                        // there's already an ongoing request,\n                        // this one needs to be deduplicated.\n                        startAt = CONCURRENT_PROMISES_TS[key];\n                        return [4 /*yield*/, CONCURRENT_PROMISES[key]];\n                    case 2:\n                        newData = _a.sent();\n                        return [3 /*break*/, 5];\n                    case 3:\n                        // if not deduping the request (hard revalidate) but\n                        // there're other ongoing request(s) at the same time,\n                        // we need to ignore the other result(s) to avoid\n                        // possible race conditions:\n                        // req1------------------>res1\n                        //      req2-------->res2\n                        // in that case, the second response should not be overridden\n                        // by the first one.\n                        if (CONCURRENT_PROMISES[key]) {\n                            // we can mark it as a mutation to ignore\n                            // all requests which are fired before this one\n                            MUTATION_TS[key] = Date.now() - 1;\n                        }\n                        // if no cache being rendered currently (it shows a blank page),\n                        // we trigger the loading slow event.\n                        if (config.loadingTimeout && !cache.get(key)) {\n                            setTimeout(function () {\n                                if (loading)\n                                    eventsRef.current.emit('onLoadingSlow', key, config);\n                            }, config.loadingTimeout);\n                        }\n                        if (fnArgs !== null) {\n                            CONCURRENT_PROMISES[key] = fn.apply(void 0, fnArgs);\n                        }\n                        else {\n                            CONCURRENT_PROMISES[key] = fn(key);\n                        }\n                        CONCURRENT_PROMISES_TS[key] = startAt = Date.now();\n                        return [4 /*yield*/, CONCURRENT_PROMISES[key]];\n                    case 4:\n                        newData = _a.sent();\n                        setTimeout(function () {\n                            delete CONCURRENT_PROMISES[key];\n                            delete CONCURRENT_PROMISES_TS[key];\n                        }, config.dedupingInterval);\n                        // trigger the success event,\n                        // only do this for the original request.\n                        eventsRef.current.emit('onSuccess', newData, key, config);\n                        _a.label = 5;\n                    case 5:\n                        // if the revalidation happened earlier than the local mutation,\n                        // we have to ignore the result because it could override.\n                        // meanwhile, a new revalidation should be triggered by the mutation.\n                        if (MUTATION_TS[key] && startAt <= MUTATION_TS[key]) {\n                            dispatch({ isValidating: false });\n                            return [2 /*return*/, false];\n                        }\n                        cache.set(key, newData, false);\n                        cache.set(keyErr, undefined, false);\n                        newState = {\n                            isValidating: false\n                        };\n                        if (typeof stateRef.current.error !== 'undefined') {\n                            // we don't have an error\n                            newState.error = undefined;\n                        }\n                        if (!config.compare(stateRef.current.data, newData)) {\n                            // deep compare to avoid extra re-render\n                            // data changed\n                            newState.data = newData;\n                        }\n                        // merge the new state\n                        dispatch(newState);\n                        if (!shouldDeduping) {\n                            // also update other hooks\n                            broadcastState(key, newData, undefined);\n                        }\n                        return [3 /*break*/, 7];\n                    case 6:\n                        err_3 = _a.sent();\n                        delete CONCURRENT_PROMISES[key];\n                        delete CONCURRENT_PROMISES_TS[key];\n                        cache.set(keyErr, err_3, false);\n                        // get a new error\n                        // don't use deep equal for errors\n                        if (stateRef.current.error !== err_3) {\n                            // we keep the stale data\n                            dispatch({\n                                isValidating: false,\n                                error: err_3\n                            });\n                            if (!shouldDeduping) {\n                                // also broadcast to update other hooks\n                                broadcastState(key, undefined, err_3);\n                            }\n                        }\n                        // events and retry\n                        eventsRef.current.emit('onError', err_3, key, config);\n                        if (config.shouldRetryOnError) {\n                            retryCount = (revalidateOpts.retryCount || 0) + 1;\n                            eventsRef.current.emit('onErrorRetry', err_3, key, config, revalidate, Object.assign({ dedupe: true }, revalidateOpts, { retryCount: retryCount }));\n                        }\n                        return [3 /*break*/, 7];\n                    case 7:\n                        loading = false;\n                        return [2 /*return*/, true];\n                }\n            });\n        });\n    }, [key]);\n    // mounted (client side rendering)\n    useIsomorphicLayoutEffect(function () {\n        if (!key)\n            return undefined;\n        // after `key` updates, we need to mark it as mounted\n        unmountedRef.current = false;\n        // after the component is mounted (hydrated),\n        // we need to update the data from the cache\n        // and trigger a revalidation\n        var currentHookData = stateRef.current.data;\n        var latestKeyedData = cache.get(key) || config.initialData;\n        // update the state if the key changed (not the inital render) or cache updated\n        if (keyRef.current !== key ||\n            !config.compare(currentHookData, latestKeyedData)) {\n            dispatch({ data: latestKeyedData });\n            keyRef.current = key;\n        }\n        // revalidate with deduping\n        var softRevalidate = function () { return revalidate({ dedupe: true }); };\n        // trigger a revalidation\n        if (config.revalidateOnMount ||\n            (!config.initialData && config.revalidateOnMount === undefined)) {\n            if (typeof latestKeyedData !== 'undefined' &&\n                !IS_SERVER &&\n                window['requestIdleCallback']) {\n                // delay revalidate if there's cache\n                // to not block the rendering\n                window['requestIdleCallback'](softRevalidate);\n            }\n            else {\n                softRevalidate();\n            }\n        }\n        // whenever the window gets focused, revalidate\n        var onFocus;\n        if (config.revalidateOnFocus) {\n            // throttle: avoid being called twice from both listeners\n            // and tabs being switched quickly\n            onFocus = throttle(softRevalidate, config.focusThrottleInterval);\n            if (!FOCUS_REVALIDATORS[key]) {\n                FOCUS_REVALIDATORS[key] = [onFocus];\n            }\n            else {\n                FOCUS_REVALIDATORS[key].push(onFocus);\n            }\n        }\n        // register global cache update listener\n        var onUpdate = function (shouldRevalidate, updatedData, updatedError, dedupe) {\n            if (shouldRevalidate === void 0) { shouldRevalidate = true; }\n            if (dedupe === void 0) { dedupe = true; }\n            // update hook state\n            var newState = {};\n            var needUpdate = false;\n            if (typeof updatedData !== 'undefined' &&\n                !config.compare(stateRef.current.data, updatedData)) {\n                newState.data = updatedData;\n                needUpdate = true;\n            }\n            // always update error\n            // because it can be `undefined`\n            if (stateRef.current.error !== updatedError) {\n                newState.error = updatedError;\n                needUpdate = true;\n            }\n            if (needUpdate) {\n                dispatch(newState);\n            }\n            if (shouldRevalidate) {\n                if (dedupe) {\n                    return softRevalidate();\n                }\n                else {\n                    return revalidate();\n                }\n            }\n            return false;\n        };\n        // add updater to listeners\n        if (!CACHE_REVALIDATORS[key]) {\n            CACHE_REVALIDATORS[key] = [onUpdate];\n        }\n        else {\n            CACHE_REVALIDATORS[key].push(onUpdate);\n        }\n        // set up reconnecting when the browser regains network connection\n        var reconnect = null;\n        if (!IS_SERVER && window.addEventListener && config.revalidateOnReconnect) {\n            window.addEventListener('online', (reconnect = softRevalidate));\n        }\n        return function () {\n            // cleanup\n            dispatch = function () { return null; };\n            // mark it as unmounted\n            unmountedRef.current = true;\n            if (onFocus && FOCUS_REVALIDATORS[key]) {\n                var revalidators = FOCUS_REVALIDATORS[key];\n                var index = revalidators.indexOf(onFocus);\n                if (index >= 0) {\n                    // 10x faster than splice\n                    // https://jsperf.com/array-remove-by-index\n                    revalidators[index] = revalidators[revalidators.length - 1];\n                    revalidators.pop();\n                }\n            }\n            if (CACHE_REVALIDATORS[key]) {\n                var revalidators = CACHE_REVALIDATORS[key];\n                var index = revalidators.indexOf(onUpdate);\n                if (index >= 0) {\n                    revalidators[index] = revalidators[revalidators.length - 1];\n                    revalidators.pop();\n                }\n            }\n            if (!IS_SERVER && window.removeEventListener && reconnect !== null) {\n                window.removeEventListener('online', reconnect);\n            }\n        };\n    }, [key, revalidate]);\n    // set up polling\n    useIsomorphicLayoutEffect(function () {\n        var timer = null;\n        var tick = function () { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(!stateRef.current.error &&\n                            (config.refreshWhenHidden || isDocumentVisible()) &&\n                            (config.refreshWhenOffline || isOnline()))) return [3 /*break*/, 2];\n                        // only revalidate when the page is visible\n                        // if API request errored, we stop polling in this round\n                        // and let the error retry function handle it\n                        return [4 /*yield*/, revalidate({ dedupe: true })];\n                    case 1:\n                        // only revalidate when the page is visible\n                        // if API request errored, we stop polling in this round\n                        // and let the error retry function handle it\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        if (config.refreshInterval) {\n                            timer = setTimeout(tick, config.refreshInterval);\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        if (config.refreshInterval) {\n            timer = setTimeout(tick, config.refreshInterval);\n        }\n        return function () {\n            if (timer)\n                clearTimeout(timer);\n        };\n    }, [\n        config.refreshInterval,\n        config.refreshWhenHidden,\n        config.refreshWhenOffline,\n        revalidate\n    ]);\n    // suspense\n    if (config.suspense) {\n        // in suspense mode, we can't return empty state\n        // (it should be suspended)\n        // try to get data and error from cache\n        var latestData = cache.get(key) || initialData;\n        var latestError = cache.get(keyErr) || initialError;\n        if (typeof latestData === 'undefined' &&\n            typeof latestError === 'undefined') {\n            // need to start the request if it hasn't\n            if (!CONCURRENT_PROMISES[key]) {\n                // trigger revalidate immediately\n                // to get the promise\n                revalidate();\n            }\n            if (CONCURRENT_PROMISES[key] &&\n                typeof CONCURRENT_PROMISES[key].then === 'function') {\n                // if it is a promise\n                throw CONCURRENT_PROMISES[key];\n            }\n            // it's a value, return it directly (override)\n            latestData = CONCURRENT_PROMISES[key];\n        }\n        if (typeof latestData === 'undefined' && latestError) {\n            // in suspense mode, throw error if there's no content\n            throw latestError;\n        }\n        // return the latest data / error from cache\n        // in case `key` has changed\n        return {\n            error: latestError,\n            data: latestData,\n            revalidate: revalidate,\n            mutate: boundMutate,\n            isValidating: stateRef.current.isValidating\n        };\n    }\n    // define returned state\n    // can be memorized since the state is a ref\n    return useMemo(function () {\n        var state = { revalidate: revalidate, mutate: boundMutate };\n        Object.defineProperties(state, {\n            error: {\n                // `key` might be changed in the upcoming hook re-render,\n                // but the previous state will stay\n                // so we need to match the latest key and data (fallback to `initialData`)\n                get: function () {\n                    stateDependencies.current.error = true;\n                    return keyRef.current === key ? stateRef.current.error : initialError;\n                },\n                enumerable: true\n            },\n            data: {\n                get: function () {\n                    stateDependencies.current.data = true;\n                    return keyRef.current === key ? stateRef.current.data : initialData;\n                },\n                enumerable: true\n            },\n            isValidating: {\n                get: function () {\n                    stateDependencies.current.isValidating = true;\n                    return stateRef.current.isValidating;\n                },\n                enumerable: true\n            }\n        });\n        return state;\n    }, [revalidate]);\n}\nvar SWRConfig = SWRConfigContext.Provider;\nexport { trigger, mutate, SWRConfig };\nexport default useSWR;\n","var __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport React, { useCallback, useMemo, useState, useRef } from 'react';\nimport { cache } from './config';\n/*\nThe idea\n\nA \"Page\" component renders the content of 1 API request, it accepts an offset (in this example it's from),\nuses a SWR hook (useSWR(API + '?limit=' + limit + '&from=' + from)) and returns items (Projects).\n\nThe UI:\n      +------------------------------------------+\n      |   Projects                               |\n+------------------------------------------------------+\n|     |   +----------------+                     |     |\n|     |                                          |     |\n|     |   +------------+                         |     |\n|     |                                          |     +--> 1 Page\n|     |   +-----------------+                    |     |\n|     |                                          |     |  /projects/list?limit=4\n|     |   +---------+                            |     |\n+------------------------------------------------------+\n      |                                          |\n      |   +------------+                         |     +  /projects/list?limit=4&from=123\n      |                                          |     |\n      |   +----------------+                     |     |\n      |                                          |     |\n      |   +---------+                            |     |\n      |                                          |     |\n      |   +--------------+                       |     +\n      |                                          |\n      |   +-------------------+                  |     +  /projects/list?limit=4&from=456\n      |                                          |     |\n      |   +------------+                         |     |\n      |                                          |     |\n      |   +----------------+                     |     |\n      |                                          |     |\n      |                                          |     +\n\nThe API\n// (inside `render`)\n\nfunction App () {\n  const {\n    pages,    // an array of each page component\n    pageSWRs, // an array of SWRs of each page\n    isLoadingMore,\n    isReachingEnd,\n    isEmpty,\n    loadMore\n  } = useSWRPages(\n    'project-page', // key of this page\n\n    // ======== the actual Page component!\n    ({ offset, withSWR }) => {\n      // required: use `withSWR` to wrap your main SWR (source of your pagination API)\n      const { data } = withSWR(\n        useSWR(API + '?limit=10&from=' + offset) // request projects with offset\n      )\n      if (!data) return <Placeholder>\n      return data.projects.map(project => <Card project={project} team={team}>)\n    },\n    // ========\n\n    // a function accepts a SWR's `data`, and returns the offset of the next page (or null)\n    data => data && data.length >= 10 ? data[data.length - 1].createdAt : null,\n\n    // (optional) outside deps of your Page component. in this case it's empty\n    []\n  )\n\n  // ...\n\n  if (isEmpty) return <EmptyProjectsPage/>\n\n  return <div>\n    {pages}\n    {isReachingEnd\n      ? null\n      : <button loading={isLoadingMore} onClick={loadMore}>Load More</button>}\n  </div>\n}\n*/\nvar pageCacheMap = new Map();\nexport function useSWRPages(pageKey, pageFn, SWRToOffset, deps) {\n    if (deps === void 0) { deps = []; }\n    var pageCountKey = \"_swr_page_count_\" + pageKey;\n    var pageOffsetKey = \"_swr_page_offset_\" + pageKey;\n    var _a = useState(cache.get(pageCountKey) || 1), pageCount = _a[0], setPageCount = _a[1];\n    var _b = useState(cache.get(pageOffsetKey) || [null]), pageOffsets = _b[0], setPageOffsets = _b[1];\n    var _c = useState([]), pageSWRs = _c[0], setPageSWRs = _c[1];\n    var pageFnRef = useRef(pageFn);\n    var emptyPageRef = useRef(false);\n    // Page component (wraps `pageFn`)\n    // for performance reason we need to memorize it\n    var Page = useCallback(function (props) {\n        // render the page component\n        var dataList = pageFnRef.current(props);\n        // if dataList is [], we can assume this page is empty\n        // TODO: this API is not stable\n        if (dataList && !dataList.length) {\n            emptyPageRef.current = true;\n        }\n        else {\n            emptyPageRef.current = false;\n        }\n        return dataList;\n    }, []);\n    // Doesn't have a next page\n    var isReachingEnd = pageOffsets[pageCount] === null;\n    var isLoadingMore = pageCount === pageOffsets.length;\n    var isEmpty = isReachingEnd && pageCount === 1 && emptyPageRef.current;\n    var loadMore = useCallback(function () {\n        if (isLoadingMore || isReachingEnd)\n            return;\n        setPageCount(function (c) {\n            cache.set(pageCountKey, c + 1);\n            return c + 1;\n        });\n    }, [isLoadingMore || isReachingEnd]);\n    var _pageFn = useCallback(pageFn, deps);\n    pageFnRef.current = _pageFn;\n    var pages = useMemo(function () {\n        var getWithSWR = function (id) { return function (swr) {\n            if (!pageSWRs[id] ||\n                pageSWRs[id].data !== swr.data ||\n                pageSWRs[id].error !== swr.error ||\n                pageSWRs[id].revalidate !== swr.revalidate) {\n                // hoist side effects: setPageSWRs and setPageOffsets -- https://reactjs.org/blog/2020/02/26/react-v16.13.0.html#warnings-for-some-updates-during-render\n                setTimeout(function () {\n                    setPageSWRs(function (swrs) {\n                        var _swrs = __spreadArrays(swrs);\n                        _swrs[id] = {\n                            data: swr.data,\n                            error: swr.error,\n                            revalidate: swr.revalidate,\n                            isValidating: swr.isValidating,\n                            mutate: swr.mutate\n                        };\n                        return _swrs;\n                    });\n                    if (typeof swr.data !== 'undefined') {\n                        // set next page's offset\n                        var newPageOffset_1 = SWRToOffset(swr, id);\n                        if (pageOffsets[id + 1] !== newPageOffset_1) {\n                            setPageOffsets(function (arr) {\n                                var _arr = __spreadArrays(arr);\n                                _arr[id + 1] = newPageOffset_1;\n                                cache.set(pageOffsetKey, _arr);\n                                return _arr;\n                            });\n                        }\n                    }\n                });\n            }\n            return swr;\n        }; };\n        // render each page\n        var p = [];\n        if (!pageCacheMap.has(pageKey)) {\n            pageCacheMap.set(pageKey, []);\n        }\n        var pageCache = pageCacheMap.get(pageKey);\n        for (var i = 0; i < pageCount; ++i) {\n            if (!pageCache[i] ||\n                pageCache[i].offset !== pageOffsets[i] ||\n                pageCache[i].pageFn !== _pageFn) {\n                // when props change or at init\n                // render the page and cache it\n                pageCache[i] = {\n                    component: (React.createElement(Page, { key: \"page-\" + pageOffsets[i] + \"-\" + i, offset: pageOffsets[i], withSWR: getWithSWR(i) })),\n                    pageFn: _pageFn,\n                    offset: pageOffsets[i]\n                };\n            }\n            p.push(pageCache[i].component);\n        }\n        return p;\n    }, [_pageFn, pageCount, pageSWRs, pageOffsets, pageKey]);\n    return {\n        pages: pages,\n        pageCount: pageCount,\n        pageSWRs: pageSWRs,\n        isLoadingMore: isLoadingMore,\n        isReachingEnd: isReachingEnd,\n        isEmpty: isEmpty,\n        loadMore: loadMore\n    };\n}\n","export * from './use-swr';\nimport { default as useSWR } from './use-swr';\nexport { useSWRPages } from './use-swr-pages';\nexport { cache } from './config';\nexport default useSWR;\n"],"sourceRoot":""}